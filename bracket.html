<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bracket Dynamique - TLeagues</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000000;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            background: #0a0a0a;
            border-bottom: 1px solid rgba(255, 0, 0, 0.1);
            padding: 1rem 3%;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 900;
            color: #ff0000;
            letter-spacing: 4px;
            text-transform: uppercase;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .nav-links a {
            color: #666;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: color 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #ff0000;
        }

        /* Header */
        .bracket-header {
            background: #0a0a0a;
            border-bottom: 1px solid rgba(255, 0, 0, 0.1);
            padding: 2rem 3%;
        }

        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .tournament-info h1 {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .tournament-meta {
            color: #666;
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .bracket-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .team-count-selector {
            display: flex;
            gap: 0.5rem;
        }

        .btn-team-count {
            padding: 0.7rem 1.2rem;
            background: transparent;
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #666;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .btn-team-count:hover {
            border-color: #ff0000;
            color: #fff;
        }

        .btn-team-count.active {
            background: #ff0000;
            border-color: #ff0000;
            color: #fff;
        }

        .btn-action {
            padding: 0.8rem 1.5rem;
            background: #ff0000;
            border: none;
            color: #fff;
            border-radius: 6px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 1px;
        }

        .btn-action:hover {
            background: #cc0000;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .btn-secondary:hover {
            background: rgba(255, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        /* Bracket Container */
        .bracket-container {
            padding: 3rem 3%;
            overflow-x: auto;
        }

        .bracket-wrapper {
            display: flex;
            gap: 4rem;
            min-width: max-content;
            justify-content: center;
        }

        /* Round */
        .round {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            min-width: 300px;
        }

        .round-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 900;
            color: #ff0000;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .round-matches {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Match */
        .match {
            background: #0a0a0a;
            border: 1px solid rgba(255, 0, 0, 0.2);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .match:hover {
            border-color: #ff0000;
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        .match-header {
            background: rgba(255, 0, 0, 0.05);
            padding: 0.7rem 1rem;
            border-bottom: 1px solid rgba(255, 0, 0, 0.1);
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            text-align: center;
        }

        .team {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .team:last-of-type {
            border-bottom: none;
        }

        .team:hover {
            background: rgba(255, 0, 0, 0.05);
        }

        .team.winner {
            background: rgba(255, 0, 0, 0.1);
        }

        .team-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .team-logo {
            width: 40px;
            height: 40px;
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid rgba(255, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .team.winner .team-logo {
            border-color: #ff0000;
            background: rgba(255, 0, 0, 0.3);
        }

        .team-name {
            font-size: 1rem;
            font-weight: 700;
            color: #fff;
        }

        .team.tbd {
            opacity: 0.4;
        }

        .team.tbd .team-name {
            color: #666;
            font-style: italic;
        }

        .team-score {
            font-size: 1.8rem;
            font-weight: 900;
            color: #666;
            min-width: 35px;
            text-align: center;
        }

        .team.winner .team-score {
            color: #ff0000;
        }

        /* Final Match */
        .round.final .match {
            border: 2px solid #ff0000;
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.3);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 5rem 2rem;
            color: #666;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state-text {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        /* Modal Edit Score */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #0a0a0a;
            border: 2px solid rgba(255, 0, 0, 0.3);
            border-radius: 12px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
        }

        .modal-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 0, 0, 0.1);
            text-align: center;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 900;
            color: #fff;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .score-inputs {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1.5rem;
            align-items: center;
            margin-bottom: 2rem;
        }

        .score-team {
            text-align: center;
        }

        .score-team-name {
            font-size: 0.9rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 1rem;
        }

        .score-input {
            width: 100%;
            background: #000;
            border: 2px solid rgba(255, 0, 0, 0.3);
            color: #fff;
            padding: 1rem;
            border-radius: 6px;
            font-size: 2rem;
            font-weight: 900;
            text-align: center;
        }

        .score-input:focus {
            outline: none;
            border-color: #ff0000;
        }

        .score-vs {
            font-size: 1.5rem;
            font-weight: 900;
            color: #666;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-modal {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        .btn-save {
            background: #ff0000;
            color: #fff;
        }

        .btn-save:hover {
            background: #cc0000;
        }

        .btn-cancel {
            background: transparent;
            color: #666;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }

        .btn-cancel:hover {
            background: rgba(255, 0, 0, 0.05);
            border-color: #ff0000;
            color: #ff0000;
        }

        /* Scrollbar */
        .bracket-container::-webkit-scrollbar {
            height: 10px;
        }

        .bracket-container::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        .bracket-container::-webkit-scrollbar-thumb {
            background: #ff0000;
            border-radius: 5px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .nav-links {
                display: none;
            }

            .bracket-wrapper {
                gap: 2rem;
            }

            .round {
                min-width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo" onclick="window.location.href='index.html'">TLEAGUES</div>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="tournois.html" class="active">Tournois</a></li>
                <li><a href="mercato.html">Mercato</a></li>
            </ul>
        </div>
    </nav>

    <!-- Header -->
    <div class="bracket-header">
        <div class="header-content">
            <div class="tournament-info">
                <h1 id="tournamentName">üèÜ WINTER CHAMPIONSHIP 2026</h1>
                <div class="tournament-meta">
                    <span>üìÖ 15 Janvier 2026</span>
                    <span id="teamCountDisplay">üë• 8 √âquipes</span>
                    <span>üí∞ 50,000‚Ç¨ Prize Pool</span>
                </div>
            </div>
            <div class="bracket-controls">
                <div class="team-count-selector">
                    <button class="btn-team-count active" onclick="setBracketSize(8)">8</button>
                    <button class="btn-team-count" onclick="setBracketSize(16)">16</button>
                    <button class="btn-team-count" onclick="setBracketSize(32)">32</button>
                    <button class="btn-team-count" onclick="setBracketSize(64)">64</button>
                </div>
                <button class="btn-action btn-secondary" onclick="generateBracket()">üîÑ G√©n√©rer</button>
                <button class="btn-action" onclick="randomizeBracket()">üé≤ Al√©atoire</button>
            </div>
        </div>
    </div>

    <!-- Bracket Container -->
    <div class="bracket-container">
        <div class="bracket-wrapper" id="bracketWrapper">
            <!-- Bracket g√©n√©r√© dynamiquement -->
        </div>
    </div>

    <!-- Edit Score Modal -->
    <div class="modal" id="scoreModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Modifier le score</div>
            </div>
            <div class="score-inputs">
                <div class="score-team">
                    <div class="score-team-name" id="team1Name">Team A</div>
                    <input type="number" class="score-input" id="team1Score" min="0" max="3" value="0">
                </div>
                <div class="score-vs">VS</div>
                <div class="score-team">
                    <div class="score-team-name" id="team2Name">Team B</div>
                    <input type="number" class="score-input" id="team2Score" min="0" max="3" value="0">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-modal btn-save" onclick="saveScore()">üíæ Sauvegarder</button>
                <button class="btn-modal btn-cancel" onclick="closeModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
        let currentBracketSize = 8;
        let bracketData = {};
        let currentEditMatch = null;

        // Team names pool
        const teamNames = [
            'Phoenix Rising', 'Shadow Wolves', 'Thunder Strike', 'Royal Knights',
            'Iron Warriors', 'Flame Legion', 'Lunar Eclipse', 'Phantom Squad',
            'Titan Force', 'Storm Raiders', 'Dragon Elite', 'Frost Giants',
            'Crimson Blade', 'Silver Hawks', 'Gold Legends', 'Dark Knights',
            'Lightning Squad', 'Ice Breakers', 'Fire Dragons', 'Sky Warriors',
            'Night Hunters', 'Dawn Patrol', 'Wild Beasts', 'Steel Legion',
            'Ocean Masters', 'Mountain Kings', 'Desert Nomads', 'Forest Rangers',
            'Cyber Ninjas', 'Cosmic Heroes', 'Alpha Predators', 'Beta Titans',
            'Gamma Force', 'Delta Squad', 'Omega Warriors', 'Sigma Legends',
            'Nova Stars', 'Meteor Strike', 'Nebula Knights', 'Galaxy Defenders',
            'Quantum Leap', 'Atomic Blast', 'Nuclear Force', 'Fusion Power',
            'Solar Flare', 'Lunar Wave', 'Eclipse Team', 'Comet Riders',
            'Vortex Squad', 'Tempest Force', 'Cyclone Warriors', 'Hurricane Elite',
            'Avalanche Team', 'Blizzard Force', 'Tornado Squad', 'Typhoon Elite',
            'Earthquake Team', 'Tsunami Force', 'Volcano Squad', 'Magma Elite',
            'Crystal Warriors', 'Diamond Force', 'Emerald Squad', 'Ruby Elite'
        ];

        const teamIcons = ['üõ°Ô∏è', 'üê∫', '‚ö°', 'üëë', '‚öîÔ∏è', 'üî•', 'üåô', 'üé≠', '‚≠ê', 'ü¶Ö', 'üêâ', '‚ùÑÔ∏è'];

        function setBracketSize(size) {
            currentBracketSize = size;
            
            // Update button states
            document.querySelectorAll('.btn-team-count').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update display
            document.getElementById('teamCountDisplay').textContent = `üë• ${size} √âquipes`;
            
            // Generate new bracket
            generateBracket();
        }

        function generateBracket() {
            const wrapper = document.getElementById('bracketWrapper');
            wrapper.innerHTML = '';
            bracketData = {};
            
            // Calculate number of rounds
            const numRounds = Math.log2(currentBracketSize);
            
            // Generate rounds
            for (let round = 0; round < numRounds; round++) {
                const roundDiv = document.createElement('div');
                roundDiv.className = round === numRounds - 1 ? 'round final' : 'round';
                
                // Round title
                const roundTitle = document.createElement('div');
                roundTitle.className = 'round-title';
                roundTitle.textContent = getRoundName(round, numRounds);
                roundDiv.appendChild(roundTitle);
                
                // Matches container
                const matchesDiv = document.createElement('div');
                matchesDiv.className = 'round-matches';
                
                // Calculate number of matches in this round
                const matchesInRound = currentBracketSize / Math.pow(2, round + 1);
                
                for (let match = 0; match < matchesInRound; match++) {
                    const matchDiv = createMatch(round, match);
                    matchesDiv.appendChild(matchDiv);
                }
                
                roundDiv.appendChild(matchesDiv);
                wrapper.appendChild(roundDiv);
            }
        }

        function getRoundName(roundIndex, totalRounds) {
            if (roundIndex === totalRounds - 1) return 'üèÜ FINALE';
            if (roundIndex === totalRounds - 2) return 'DEMI-FINALES';
            if (roundIndex === totalRounds - 3) return 'QUARTS DE FINALE';
            if (roundIndex === totalRounds - 4) return '1/8 DE FINALE';
            if (roundIndex === totalRounds - 5) return '1/16 DE FINALE';
            return `ROUND ${roundIndex + 1}`;
        }

        function createMatch(round, matchIndex) {
            const matchId = `r${round}m${matchIndex}`;
            const matchDiv = document.createElement('div');
            matchDiv.className = 'match';
            matchDiv.dataset.matchId = matchId;
            matchDiv.onclick = () => editMatch(matchId);
            
            // Match header
            const header = document.createElement('div');
            header.className = 'match-header';
            header.textContent = `Match ${matchIndex + 1}`;
            matchDiv.appendChild(header);
            
            // Team 1
            const team1 = createTeam(round, matchIndex, 0);
            matchDiv.appendChild(team1);
            
            // Team 2
            const team2 = createTeam(round, matchIndex, 1);
            matchDiv.appendChild(team2);
            
            return matchDiv;
        }

        function createTeam(round, matchIndex, teamIndex) {
            const teamDiv = document.createElement('div');
            teamDiv.className = 'team tbd';
            
            const teamInfo = document.createElement('div');
            teamInfo.className = 'team-info';
            
            const teamLogo = document.createElement('div');
            teamLogo.className = 'team-logo';
            teamLogo.textContent = '?';
            
            const teamName = document.createElement('div');
            teamName.className = 'team-name';
            teamName.textContent = 'TBD';
            
            teamInfo.appendChild(teamLogo);
            teamInfo.appendChild(teamName);
            
            const teamScore = document.createElement('div');
            teamScore.className = 'team-score';
            teamScore.textContent = '-';
            
            teamDiv.appendChild(teamInfo);
            teamDiv.appendChild(teamScore);
            
            return teamDiv;
        }

        function randomizeBracket() {
            // Fill first round with random teams
            const firstRoundMatches = document.querySelectorAll('.round:first-child .match');
            const shuffledTeams = [...teamNames].sort(() => Math.random() - 0.5).slice(0, currentBracketSize);
            
            firstRoundMatches.forEach((match, matchIndex) => {
                const teams = match.querySelectorAll('.team');
                teams.forEach((team, teamIndex) => {
                    const teamIdx = matchIndex * 2 + teamIndex;
                    if (teamIdx < shuffledTeams.length) {
                        team.classList.remove('tbd');
                        team.querySelector('.team-logo').textContent = teamIcons[teamIdx % teamIcons.length];
                        team.querySelector('.team-name').textContent = shuffledTeams[teamIdx];
                        team.querySelector('.team-score').textContent = '0';
                    }
                });
            });
            
            alert('‚úÖ Bracket rempli avec des √©quipes al√©atoires !');
        }

        function editMatch(matchId) {
            const match = document.querySelector(`[data-match-id="${matchId}"]`);
            const teams = match.querySelectorAll('.team');
            
            // Check if both teams are assigned
            if (teams[0].classList.contains('tbd') || teams[1].classList.contains('tbd')) {
                alert('‚ö†Ô∏è Les deux √©quipes doivent √™tre assign√©es avant de modifier le score');
                return;
            }
            
            currentEditMatch = matchId;
            
            // Fill modal
            document.getElementById('team1Name').textContent = teams[0].querySelector('.team-name').textContent;
            document.getElementById('team2Name').textContent = teams[1].querySelector('.team-name').textContent;
            
            const score1 = teams[0].querySelector('.team-score').textContent;
            const score2 = teams[1].querySelector('.team-score').textContent;
            
            document.getElementById('team1Score').value = score1 === '-' ? 0 : score1;
            document.getElementById('team2Score').value = score2 === '-' ? 0 : score2;
            
            document.getElementById('scoreModal').classList.add('active');
        }

        function saveScore() {
            const team1Score = parseInt(document.getElementById('team1Score').value);
            const team2Score = parseInt(document.getElementById('team2Score').value);
            
            const match = document.querySelector(`[data-match-id="${currentEditMatch}"]`);
            const teams = match.querySelectorAll('.team');
            const scores = match.querySelectorAll('.team-score');
            
            scores[0].textContent = team1Score;
            scores[1].textContent = team2Score;
            
            // Update winner
            teams[0].classList.remove('winner');
            teams[1].classList.remove('winner');
            
            if (team1Score > team2Score) {
                teams[0].classList.add('winner');
            } else if (team2Score > team1Score) {
                teams[1].classList.add('winner');
            }
            
            // Save to bracketData
            bracketData[currentEditMatch] = { team1Score, team2Score };
            
            closeModal();
        }

        function closeModal() {
            document.getElementById('scoreModal').classList.remove('active');
        }

        // Close modal on outside click
        document.getElementById('scoreModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Initialize with 8 teams
        generateBracket();
    </script>
</body>
</html>
